var h=(r,o,s)=>new Promise((t,e)=>{var n=i=>{try{u(s.next(i))}catch(p){e(p)}},a=i=>{try{u(s.throw(i))}catch(p){e(p)}},u=i=>i.done?t(i.value):Promise.resolve(i.value).then(n,a);u((s=s.apply(r,o)).next())});import{c as d,r as L,a as P,b,d as k,e as w,h as f,E as I,D as A,f as O,g as y,u as R,i as C,o as S,j as D,s as $,k as j,_ as U,C as V,I as x,l as H}from"./vendor.52e9d3a7.js";const N=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}};N();const q="modulepreload",v={},B="/assets/ant_pos/AntPos/",E=function(o,s){return!s||s.length===0?o():Promise.all(s.map(t=>{if(t=`${B}${t}`,t in v)return;v[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const a=document.createElement("link");if(a.rel=e?"stylesheet":q,e||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),e)return new Promise((u,i)=>{a.addEventListener("load",u),a.addEventListener("error",i)})})).then(()=>o())},g=d({url:"frappe.auth.get_logged_user",cache:"User",onError(r){r&&r.exc_type==="AuthenticationError"&&m.push({name:"LoginPage"})}});function _(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const l=L({login:d({url:"login",makeParams({email:r,password:o}){return{usr:r,pwd:o}},onSuccess(r){g.reload(),l.user=_(),l.login.reset(),m.replace(r.default_route||"/")}}),logout:d({url:"logout",onSuccess(){g.reset(),l.user=_(),m.replace({name:"Login"})}}),user:_(),isLoggedIn:P(()=>!!l.user)}),F=[{path:"/",name:"Home",component:()=>E(()=>import("./Home.df1e375b.js"),["assets/Home.df1e375b.js","assets/vendor.52e9d3a7.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>E(()=>import("./Login.d2586ec4.js"),["assets/Login.d2586ec4.js","assets/vendor.52e9d3a7.js","assets/vendor.1875b906.css"])}];let m=b({history:k("/AntPos"),routes:F});m.beforeEach((r,o,s)=>h(void 0,null,function*(){let t=l.isLoggedIn;try{yield g.promise}catch(e){t=!1}r.name==="Login"&&t?s({name:"Home"}):r.name!=="Login"&&!t?s({name:"Login"}):s()}));let T=w([]),W={name:"Dialogs",render(){return T.value.map(r=>f(A,{options:r,modelValue:r.show,"onUpdate:modelValue":o=>r.show=o},()=>[f("p",{class:"text-p-base text-gray-700"},r.message),f(I,{class:"mt-2",message:r.error})]))}};const G={setup(r){return(o,s)=>{const t=C("router-view");return S(),O("div",null,[y(t),y(R(W))])}}},c=D(G);$("resourceFetcher",H);c.use(m);c.use(j);c.component("Button",U);c.component("Card",V);c.component("Input",x);const K=L({Ant_Opening_Shift:{},items:[]});c.provide("base",K);c.mount("#app");export{E as _,l as s};
